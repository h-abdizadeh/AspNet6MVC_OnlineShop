@model OnlineShop.Models.Group

@{
    ViewData["Title"] = "Edit";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<h1>Edit</h1>

<h4>Group</h4>
<hr />
<div class="row">
    <div class="col-md-4">
        <form asp-action="Edit" method="post" enctype="multipart/form-data">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <input type="hidden" asp-for="Id" />
            <div class="form-group">
                <label asp-for="Name" class="control-label"></label>
                <input asp-for="Name" class="form-control" />
                <span asp-validation-for="Name" class="text-danger"></span>
            </div>
            <div class="form-group row">
                <label asp-for="Img" class="control-label"></label>
                <input asp-for="Img" class="form-control" hidden />
                 <input type="file" name="imgFile" asp-for="Img" class="form-control" onchange="imgLoad(this)" />

                @*new image*@
                 <div id="img-div" class="col-6 mt-1" hidden>
                     <label>تصویر جدید</label>
                     <img id="img-box" src="" width="150" onload="imgDivShow()" />
                 </div>

                @*current Image*@
                <div class="col-6 mt-1">
                    <label>تصویر فعلی</label>
                    <img src="~/image/group/@Model.Img" width="150" />
                </div>


                <span asp-validation-for="Img" class="text-danger"></span>
            </div>
            <div class="form-group form-check">
                <label class="form-check-label">
                    <input class="form-check-input" asp-for="NotShow" /> @Html.DisplayNameFor(model => model.NotShow)
                </label>
            </div>
            <div class="form-group">
                <input type="submit" value="Save" class="btn btn-primary" />
            </div>
        </form>
    </div>
</div>

<div>
    <a asp-action="Index">Back to List</a>
</div>

<script type="text/javascript">

   //function imgLoad(input){
   //     let _imgBox=document.getElementById("img-box");

   //     if(input.files && input.files[0]){

   //         let reader = new FileReader();

   //         reader.onload=function(e){
   //             _imgBox.setAttribute('src',e.target.result);
   //         }

   //         reader.readAsDataURL(input.files[0]);
   //     }
   //}

   function imgLoad(input){
        if(input.files && input.files[0]){

            let reader = new FileReader();

            reader.onload=function(e){

                $('#img-box').attr('src',e.target.result)
            }

            reader.readAsDataURL(input.files[0]);

        }
   }

   function  imgDivShow(){
       let _imgDiv=document.getElementById("img-div");
       _imgDiv.hidden=false;
       _imgDiv.style.backgroundColor="yellow";
       _imgDiv.style.borderRadius="10px";
       _imgDiv.style.paddingBottom="3px";
   }

</script>